<div class="flex flex-col bg-primary/65 border-4 border-secondary rounded-xl">

    <!-- Invoervelden -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mx-auto p-4">
        <!-- Leeftijd -->
        <div class="col-span-2 lg:col-span-1">
            <label class="text-white">Leeftijd</label>
            <div class="input-group " data-input-number>
                <input class="input" type="number" min="0" [(ngModel)]="age" data-input-number-input />
                <span class="input-group-text gap-3">
                    <button type="button" class="btn btn-primary btn-soft size-[22px] rounded min-h-0 p-0"
                        aria-label="Decrement button" (pointerdown)="startAdjusting('age', -1, 0)"
                        (pointerup)="stopAdjusting()" (pointerleave)="stopAdjusting()">
                        <span class="icon-[tabler--minus] size-3.5 flex-shrink-0"></span>
                    </button>
                    <button type="button" class="btn btn-primary btn-soft size-[22px] rounded min-h-0 p-0"
                        aria-label="Increment button" (pointerdown)="startAdjusting('age', 1, 0)"
                        (pointerup)="stopAdjusting()" (pointerleave)="stopAdjusting()">
                        <span class="icon-[tabler--plus] size-3.5 flex-shrink-0"></span>
                    </button>
                </span>
            </div>
        </div>

        <!-- TDEE -->
        <div class="col-span-2 lg:col-span-1">
            <label class="text-white">TDEE (kcal)</label>
            <div class="input-group " data-input-number>
                <input class="input" type="number" min="0" [(ngModel)]="tdee" data-input-number-input />
                <span class="input-group-text gap-3">
                    <button type="button" class="btn btn-primary btn-soft size-[22px] rounded min-h-0 p-0"
                        aria-label="Decrement button" (pointerdown)="startAdjusting('tdee', -50, 0)"
                        (pointerup)="stopAdjusting()" (pointerleave)="stopAdjusting()">
                        <span class="icon-[tabler--minus] size-3.5 flex-shrink-0"></span>
                    </button>
                    <button type="button" class="btn btn-primary btn-soft size-[22px] rounded min-h-0 p-0"
                        aria-label="Increment button" (pointerdown)="startAdjusting('tdee', 50, 0)"
                        (pointerup)="stopAdjusting()" (pointerleave)="stopAdjusting()">
                        <span class="icon-[tabler--plus] size-3.5 flex-shrink-0"></span>
                    </button>
                </span>
            </div>
        </div>

        <!-- Geslacht -->
        <div class="col-span-2 lg:px-60">
            <label class="text-white">Geslacht</label>
            <select class="input w-full" [(ngModel)]="sex">
                <option value="male">Man</option>
                <option value="female">Vrouw</option>
            </select>
        </div>

        <!-- Extra factoren: Alleen voor vrouwen -->


        <!-- Extra factoren: Voor alle geslachten -->
        <div class="col-span-2  mx-auto mt-4">
            <label class="text-white ">Extra factoren (Selecteer alles dat van toepassing
                is)</label>


            <div class="flex flex-row gap-4 mt-4">
                <div>

                    <div class="flex flex-col gap-4 overflow-x-auto">
                        <div class="flex items-center gap-2">
                            <input type="checkbox" class="checkbox checkbox-primary" id="checkboxInline1"
                                [(ngModel)]="hasDarkSkin" />
                            <label class="label-text text-base text-white" for="checkboxInline1"> Donkere
                                huidskleur </label>
                        </div>
                        <div class="flex items-center gap-2">
                            <input type="checkbox" class="checkbox checkbox-primary" id="checkboxInline2"
                                [(ngModel)]="staysIndoors" />
                            <label class="label-text text-base text-white" for="checkboxInline2"> Weinig
                                zonlicht </label>
                        </div>
                        <div class="flex items-center gap-2">
                            <input type="checkbox" class="checkbox checkbox-primary" id="checkboxInline3"
                                [(ngModel)]="isVegan" />
                            <label class="label-text text-base text-white" for="checkboxInline3"> Vega/Veganist </label>
                        </div>
                        <div class="flex items-center gap-2">
                            <input type="checkbox" class="checkbox checkbox-primary" id="checkboxInline4"
                                [(ngModel)]="takesMedication" />
                            <label class="label-text text-base text-white" for="checkboxInline4"> Medicijngebruik
                            </label>
                        </div>
                    </div>
                </div>
                <div *ngIf="sex == 'female'">
                    <div class="flex flex-col gap-4 overflow-x-auto">
                        <div class="flex  items-center gap-2">
                            <input type="checkbox" class="checkbox checkbox-primary" [(ngModel)]="isPregnant"
                                id="checkboxInline1a" />
                            <label class="label-text text-base text-white" for="checkboxInline1"> Zwanger
                            </label>
                        </div>
                        <div class="flex items-center gap-2">
                            <input type="checkbox" class="checkbox checkbox-primary " [(ngModel)]="isPlanningPregnancy"
                                id="checkboxInline2a" />
                            <label class="label-text text-base text-white" for="checkboxInline2"> Zwanger willen
                                worden </label>
                        </div>
                        <div class="flex items-center gap-2">
                            <input type="checkbox" class="checkbox checkbox-primary" [(ngModel)]="isBreastfeeding"
                                id="checkboxInline3a" />
                            <label class="label-text text-base text-white" for="checkboxInline3"> Bij
                                borstvoeding </label>
                        </div>
                        <div class="flex items-center gap-2">
                            <input type="checkbox" class="checkbox checkbox-primary" [(ngModel)]="isMenopausal"
                                id="checkboxInline4a" />
                            <label class="label-text text-base text-white" for="checkboxInline4"> Na overgang
                                (postmenopauzaal) </label>
                        </div>
                    </div>
                </div>



            </div>
        </div>


    </div>

    <!-- Bereken knop -->
    <div class="flex flex-col justify-center p-4 border-t-2 bg-primary/40 rounded border-secondary gap-3 mt-4">
        <!-- Medicijngebruik waarschuwing -->

        <button class="btn btn-primary text-white  mx-auto" (click)="calculate(); calculationDone = true">
            <span class="icon-[solar--calculator-bold] size-6 flex-shrink-0 bg-white"></span> Bereken
        </button>
        <div *ngIf="takesMedication" class="mt-4 p-4 bg-red-500 rounded-xl">
            <p class="text-white text-center">
                ⚠️ Gebruik je medicijnen? Vraag dan advies aan de huisarts en bekijk de informatie op
                <a target="_blank" rel="noopener noreferrer"
                    href="https://www.ivg-info.nl/gezondheid/bij-medicijngebruik/medicijnen-en-voedingssupplementen-tegelijk-gebruiken/"
                    class="link link-info">IVG</a>.
            </p>
        </div>
    </div>

    <!-- Resultaten: alleen tonen als calculationDone true is -->

</div>
<div *ngIf="calculationDone" class="flex p-4   mt-4  justify-center">
    <div class="mx-auto">
        <div class="mt-4 p-4 bg-primary/90 rounded-xl border-4 border-secondary">
            <h2 class="text-xl text-white font-bold mt-4 text-center mb-10">Vitaminen</h2>
            <table class="table-auto w-full text-white mt-2 text-xs">
                <thead>
                    <tr>
                        <th class="px-1 py-2 text-left text-secondary">Vitamine</th>
                        <th class="px-1 py-2 text-left text-secondary">Aanbevolen</th>
                        <th class="px-1 py-2 text-left text-secondary">Bovengrens</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class=" border-b" *ngFor="let vitamin of vitamins[sex]">
                        <td class="px-1 py-2 w-1/3 text-secondary">{{ vitamin.name }}</td>
                        <td class="px-1 py-2 w-1/3 ">{{ vitamin.adh }}</td>
                        <td class="px-1 py-2 w-1/3">{{ vitamin.ab }}</td>
                    </tr>
                </tbody>
            </table>
        </div>


        <!-- Algemene aanbevelingen: Mineralen -->
        <div class="mt-4 p-4 bg-primary/90 rounded-xl border-4 border-secondary">
            <h2 class="text-xl text-white font-bold mt-4 text-center mb-10">Mineralen/spoorelementen</h2>
            <table class="table-auto w-full text-white mt-2 text-xs">
                <thead>
                    <tr>
                        <th class=" py-2 text-left text-secondary">Mineraal</th>
                        <th class=" py-2 text-left text-secondary">Aanbevolen</th>
                        <th class=" py-2 text-left text-secondary">Bovengrens</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class=" border-b" *ngFor="let mineral of minerals[sex]">
                        <td class=" py-2 w-1/3 text-secondary">{{ mineral.name }}</td>
                        <td class=" py-2 w-1/3">{{ mineral.adh }}</td>
                        <td class=" py-2 w-1/3">{{ mineral.ab }}</td>
                    </tr>
                </tbody>
            </table>
        </div>


        <!-- Persoonlijk extra suppletieadvies -->
        <div class="mt-4 p-4 bg-primary/90 rounded-xl border-4 border-secondary">
            <h2 class="text-xl text-white font-bold text-center">Suppletie Advies</h2>
            <ul class="text-white text-lg">
                <li class="border-b mt-3" *ngFor="let supplement of recommendedSupplements">
                    <strong class="text-secondary ">{{ supplement.name }}:</strong> {{ supplement.amount }} extra
                    (reden: {{supplement.reason}})
                </li>

            </ul>
            <p *ngIf="recommendedSupplements.length === 0" class="text-center text-white">
                Geen extra suppletie geadviseerd (mits voeding in orde).

            </p>
            <div class=" mt-3">
                <small class="text-white">Advies afkomstig van het <a class="link link-info" target="_blank"
                        rel="noopener noreferrer"
                        href="https://www.voedingscentrum.nl/encyclopedie/vitamines.aspx">VoedingsCentrum</a></small>.
            </div>
        </div>


    </div>
</div>
<div *ngIf="!calculationDone" class="flex p-4 bg-primary/65 rounded-xl mt-4 border-4 border-secondary justify-center">
    <div class="mx-auto w-3/4">
        <h1 class="text-2xl text-center text-white font-bold">Resultaat nog niet berekend!</h1>
    </div>
</div>